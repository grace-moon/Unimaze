{% load static %}
<!DOCTYPE html>
<html lang="ko">
  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- CSS 파일 -->
    <link rel="stylesheet" href="{% static '/css/map.css' %}">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/autoComplete.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/css/autoComplete.min.css">
    <!-- JS 파일 (jQuery와 Popper.js도 함께 포함) -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script type="module">
        import { VctrApi } from "https://www.vectary.com/viewer-api/v1/api.js";
        // Your Viewer API magic here
    </script>

  </head>

  <!-- 나머지 HTML 내용 -->
</html>
    <style>
    .offcanvas-backdrop.fade{
        display: none;
    }

      #postList li {
        display: none;
      }

    .nav-link {
        display: inline-block;
        padding: 0.5rem 1rem;
    }
    .dropdown-toggle:hover{
        color: #508447;
    }
    .positions-container {
        column-count: 2; /* 2단 설정 */
        column-gap: 20px; /* 단 사이의 간격 설정 */
    }

.nav-link:focus, .nav-link:hover {
    color: #508447;

}

.nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
    text-align: center;
    color: #b1293e;
    background-color: #fff;

}
.spinner {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 9999;
  width: 40px;
  height: 40px;
  border: 4px solid rgba(0, 0, 0, 0.1);
  border-left-color: #04a804;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}


    .dropdown-item:hover {
        font-weight: bold;
        background: none;
        color: #b1293e;
    }
    #readMoreButton {
      border: none;
    }
    body{
        min-width: 300px;
        width: 100%;
        margin: 0;
        font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #212529;
        text-align: center;
        background-color: #fff;
    }

    .nav-tabs .nav-link {
        border: none;
        background: none;
        margin: 0;
        }



    .nav-tabs {
        border: none;
    }

    #navbarDropdown4::after,
    #navbarDropdown2::after,
    #navbarDropdown3::after,
    #navbarDropdown1::after {
        display: inline-block;
        width: 0;
        height: 0;
        margin-left: 0.255em;
        vertical-align: 0.255em;
        content: "";
        border: none;

    }
    .form-control:focus {

        box-shadow: none;
    }

.dropdown-menu.show {
    display: contents;
}

.dropdown.nav-item.show{
    border-top: black solid;
    border-bottom: black solid;
    padding:0 5% 0 0;
}

.dropdown-toggle {
        font-size: 25px;
        font-weight: bold;
        font-family: 'IBM Plex Sans KR', bold;
        color: black;
    }

.offcanvas-backdrop fade show:focus{
    display: none;
}

.search-post a{
    margin : auto 2% auto 2%  ;
    font-size: 18px;
    font-weight: normal;
    font-family: 'IBM Plex Sans KR';
    color: black;
    text-decoration: black;
}

.btn-primary.focus, .btn-primary:focus {
    box-shadow: 0 0 0 0.1rem rgba(0, 0, 0, 0.3);
}

.bg-light {
    background-color: #FFFFFF!important;
    display: inline-block;
}

.row{
    margin-bottom: 2%;
    padding: 1%;
}
.offcanvas-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1040;
    width: 100vw;
    height: 100vh;
    background:none
}
    </style>

<body>
        <div id="logo_img" style="text-align: center; margin-top: 3%; margin-bottom: 1%; width: 100%;">
            <a href="{% url 'home' %}">
                <img src="{% static 'logo_.png' %}" width="300px;">
            </a>
        </div>
        <nav class="navbar navbar-light bg-light">
            <div class="container-fluid d-flex justify-content-end ">
            <ul class="nav nav-tabs justify-content-center" style=" width: 100%; margin-left: auto; margin-right: auto">
                <li class="nav-item dropdown" style="text-align: center; display: inline-flex;  margin-left: auto; margin-right: auto; ">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="border: none">
                        3D MAP
                    </a>
                    <ul class="dropdown-menu row" aria-labelledby="navbarDropdown1" style="width: 600%; text-align: center;">
                        <div class="row" style="margin-left: auto; margin-right: auto;">
                            <li class="col-md-3"><a class="dropdown-item" href="/3dmap/tta/1">30주년 기념관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">HRC(하모니홀)</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">HRC(하트홀)</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">EduPark</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">공학관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">공학실험관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">국제생활관(3생활관)</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">기초과학관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">기초과학관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">맥센터(렉처홀)</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">맥센터(메인홀)</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/3dmap/mm/24">문무관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">산학협력관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/3dmap/fs/11">융합과학관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">응용과학관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/3dmap/hs/29">인문사회관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">제2생활관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">제4생활관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/3dmap/jl/42">지산도서관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/3dmap/ch/36">창학관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">학생회관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/3dmap/om/17">한의학관</a></li>
                            <li class="col-md-3"><a class="dropdown-item" href="/ready">혜화문화관</a></li>
                        </div>
                    </ul>
                </li>

                <li class="navbar-toggler"  data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" style=" margin-bottom: 1%; border: none; margin-right: auto; margin-left: auto">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown2" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display: inline-flex;">
                        CONTACTS
                    </a>
                </li>
                <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                  <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Contacts Search</h5>
                    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" style="width: 30px; height: 30px" aria-label="Close"></button>
                  </div>
                  <div class="offcanvas-body">
                    <form class="form-inline" style="width: 100%; display: inline-flex; justify-content: center; text-align: center;">
                        <input type="text" id="searchInput" class="form-control" type="search" placeholder="검색어를 입력하세요." aria-label="Search" style="width: 90%; border:none; outline: none; border-radius: 0rem; border-bottom: 2px solid darkgreen;">
                            <p class="my-2 my-sm-0" type="" style="border: none; color: black;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-search" viewBox="0 0 20 20" style="color: darkgreen">
                                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                </svg>
                            </p>
                        <ul id="postList" class="search-post" style="width: 100%; padding: 3%;">
                          {% for com in post_con %}
                              <li style="border-bottom: darkgreen dashed 2px; margin-bottom: 2%">
                                  {% if com.location %}
                                    <a href="#">{{ com.location }}</a><br>
                                  {% endif %}
                                  {% if com.department %}
                                    <a href="#">{{ com.department }}</a><br>
                                  {% endif %}
                                  {% if com.major %}
                                    <a href="#">{{ com.major }}</a><br>
                                  {% endif %}
                                  {% if com.position %}
                                    <p style="font-size: 15px; margin-bottom: 0px" >{{ com.position }}</p>
                                  {% endif %}
                                  {% if com.name %}
                                    <a href="#">{{ com.name }}</a><br>
                                  {% endif %}
                                  {% if com.contact %}
                                    <a href="#">{{ com.contact }}</a><br>
                                  {% endif %}
                                  {% if com.task %}
                                    <p style="font-size: 15px">{{com.task}}</p></a>
                                  {% endif %}
                              </li>
                          {% endfor %}

                        </ul>
                    </form>
                  </div>
                </div>

<li class="nav-item dropdown" style="margin-left: auto; margin-right: auto; text-align: center; border: none; display: inline-flex">
    <a class="nav-link dropdown-toggle" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom" href="#" id="navbarDropdown3" role="button" data-toggle="offcanvas" aria-haspopup="true" aria-expanded="false">
        SEARCH
    </a>
    <div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel" style="height: 50%">
        <div class="offcanvas-header" style="margin-left: 10%">
            <a class="offcanvas-title" id="offcanvasBottomLabel"></a>
            <button style="display: inline-block" type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body" style="display: flex; flex-direction: row; ">
            <form class="col-4 form-inline" style="display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <div style="display: flex; align-items: center; width: 80%;">
                    <input type="text" id="searchInput2" class="form-control" type="search" placeholder="검색어를 입력하세요." aria-label="Search" style="width: 80%; border:none; outline: none; border-radius: 0rem; border-bottom: 2px solid darkgreen;">
                    <p class="my-2 my-sm-0" style="border: none; color: black; margin-left: 10px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-search" viewBox="0 0 20 20" style="color: darkgreen">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                        </svg>
                    </p>
                </div>
            </form>
            <div class="col-7" style="width: 80%; overflow-y: auto; border-top: black solid 2px; border-bottom: black solid 2px; border-radius: 1.25rem; border-color: darkgreen; border-style : solid; ">
                <ul id="postList2" class="search-post" style="padding: 0; list-style: none;">
                    {% for post in post_map %}
                        <li style="border-bottom: darkgreen dashed 2px; margin-bottom: 2%;">
                            {% if post.building_name %}
                                <a>{{ post.building_name }}</a><br>
                            {% endif %}
                            {% if post.floor %}
                                <a href="#">{{ post.floor }}</a><br>
                            {% endif %}
                            {% if post.text %}
                                <a style="font-size: 15px; margin-bottom: 0px">{{ post.text }}</a>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</li>
<div id="spinner" class="spinner"></div>



                <li class="nav-item dropdown" style="    margin-left: auto; margin-right: auto; text-align: center; border: none; display: inline-flex">

                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown4" role="button" data-toggle="" aria-haspopup="true" aria-expanded="false">
                        ABOUT US
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    {% block content %}
        <div id="map" style="width:100%; height:600px;"></div>
    {% endblock %}
        <script>
        const backdrop = document.querySelector('.offcanvas-backdrop.fade.show');
            backdrop.parentNode.removeChild(backdrop);

        </script>

    <script>
      const searchInput = document.getElementById('searchInput');
      const postList = document.getElementById('postList').getElementsByTagName('li');
      let previousKeyword = '';

      searchInput.addEventListener('input', function() {
        const keyword = searchInput.value.toLowerCase().replace(/\s/g, '');

        Array.from(postList).forEach(function(post) {
          const content = post.textContent.toLowerCase().replace(/\s/g, '');
          if (content.includes(keyword)) {
            post.style.display = 'block';
          } else {
            post.style.display = 'none';
          }
        });

        previousKeyword = keyword;
      });


      searchInput.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
          event.preventDefault(); // 기본 동작인 폼 제출 방지
          event.stopPropagation(); // 이벤트 전파 중지
        }
      });

      searchInput.addEventListener('focusin', function() {
        searchInput.value = previousKeyword;
      });
    </script>


<script>
    document.getElementById('searchInput2').addEventListener('input', function() {
        var input, filter, ul, li, a, i, txtValue;
        input = document.getElementById('searchInput2');
        filter = input.value.toUpperCase();
        ul = document.getElementById("postList2");
        li = ul.getElementsByTagName('li');

        var hasResults = false;
        var noResultsLi = ul.querySelector(".no-results");
        var otherResultsLi = ul.querySelector(".other-results");

        for (i = 0; i < li.length; i++) {
            a = li[i].getElementsByTagName("a")[0];
            txtValue = a.textContent || a.innerText;

            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                li[i].style.display = "";
                hasResults = true;
            } else {
                li[i].style.display = "none";
            }

            var p = li[i].getElementsByTagName("p")[0];
            if (p) {
                txtValue = p.textContent || p.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    li[i].style.display = "";
                    hasResults = true;
                } else {
                    li[i].style.display = "none";
                }
            }
        }

        if (!hasResults) {
            if (!noResultsLi) {
                noResultsLi = document.createElement("li");
                noResultsLi.classList.add("no-results");
                noResultsLi.innerHTML = "<div style='padding: 17%; margin-top: auto; margin-bottom: auto'><h5>검색 결과가 없습니다.</h5></div>";
                ul.appendChild(noResultsLi);
            }
            if (otherResultsLi) {
                otherResultsLi.style.display = "none";
            }
        } else {
            if (noResultsLi) {
                ul.removeChild(noResultsLi);
            }
            if (filter.length > 0) {
                if (!otherResultsLi) {
                    otherResultsLi = document.createElement("li");
                    otherResultsLi.classList.add("other-results");
                    otherResultsLi.innerHTML = "<div style='padding: 17%; margin-top: auto; margin-bottom: auto'><h5>다른 검색 결과를 원하시면 검색어를 변경해주세요.</h5></div>";
                    ul.appendChild(otherResultsLi);
                }
            } else if (otherResultsLi) {
                ul.removeChild(otherResultsLi);
            }
        }
    });

    document.getElementById('searchInput2').addEventListener('keydown', function(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            return false;
        }
    });
</script>




<script>
    window.addEventListener('load', function() {
      var spinner = document.getElementById('spinner');
      spinner.style.display = 'none';
    });

</script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=c79acd57be8ee7ed205682cc3779496c"></script>
    <script>


        var mapContainer = document.getElementById('map'), // 지도를 표시할 div
            mapOption = {
                center: new kakao.maps.LatLng(36.33639939410993,  127.46123002158983), // 지도의 중심좌표
                level: 3 // 지도의 확대 레벨
            };

        var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

        // 마커를 표시할 위치와 내용을 가지고 있는 객체 배열입니다
            var positions = [
                {
                    content: none,
                    latlng: new kakao.maps.LatLng(36.33611566110516,127.46002541375002)
                },
                {
                    latlng: new kakao.maps.LatLng(36.33332417963411,127.46180220114597)
                },
                {
                    content: '<div>공학실험관</div>',
                    latlng: new kakao.maps.LatLng(36.333312597823536,  127.46130092780878)
                },
                {
                    content: '<div>국제생활관(제3생활관)</div>',
                    latlng: new kakao.maps.LatLng(36.33780715279762, 127.45838685788743)
                },
                {
                    content: '<div>기초과학관</div>',
                    latlng: new kakao.maps.LatLng(36.33284846039782, 127.4613093292189)
                },
                {
                    content: '<div>맥센터(렉처홀)</div>',
                    latlng: new kakao.maps.LatLng(36.335998841391, 127.4622746575982)
                },
                {
                    content: '<div>맥센터(메인홀)</div>',
                    latlng: new kakao.maps.LatLng(36.33596007906786, 127.46297613924514)
                },
                {
                    content: '<div>문무관</div>',
                    latlng: new kakao.maps.LatLng(36.336016545432535, 127.4576746549923)
                },
                {
                    content: '<div>산학협력관</div>',
                    latlng: new kakao.maps.LatLng(36.334614695843946, 127.45781124944808)
                },
                {
                    content: '<div>융합과학관</div>',
                    latlng: new kakao.maps.LatLng(36.33522662733902, 127.45803759343447)
                },
                {
                    content: '<div>응용과학관</div>',
                    latlng: new kakao.maps.LatLng(36.33381080285414, 127.46180507331417)
                },
                {
                    content: '<div>인문사회관</div>',
                    latlng: new kakao.maps.LatLng(36.336651239021435, 127.45901497183533)
                },
                {
                    content: '<div>입학홍보관</div>',
                    latlng: new kakao.maps.LatLng(36.33451875078942, 127.46283395341769)
                },
                {
                    content: '<div>제5생활관-HRC(하모니홀)</div>',
                    latlng: new kakao.maps.LatLng(36.3337343586822,127.46292955487455)
                },
                    {
                    content: '<div>제5생활관-HRC(하트홀)</div>',
                    latlng: new kakao.maps.LatLng(36.33323868085334, 127.4629377600259)
                },       {
                    content: '<div>제2생활관</div>',
                    latlng: new kakao.maps.LatLng(36.338237184283706,127.45904655453961)
                },       {
                    content: '<div>제4생활관</div>',
                    latlng: new kakao.maps.LatLng(36.33706017728725, 127.45812629733736)
                },       {
                    content: '<div>지산도서관</div>',
                    latlng: new kakao.maps.LatLng(36.33639939410993,127.46123002158983)
                },       {
                    content: '<div>창학관</div>',
                    latlng: new kakao.maps.LatLng(36.334901973681326, 127.46161102785686)
                },
                {
                    content: '<div>학생회관</div>',
                    latlng: new kakao.maps.LatLng(36.334298716648476, 127.46147381230575)
                },
                {
                    content: '<div>한의학관</div>',
                    latlng: new kakao.maps.LatLng(36.33538584456335, 127.45881819852357)
                },    {
                    content: '<div>혜화문화관</div>',
                    latlng: new kakao.maps.LatLng(36.33707036966329,127.46016468871912)
                },
                {
                    content: '<div>The 4th Edu-Park</div>',
                    latlng: new kakao.maps.LatLng(36.33623064580255, 127.45824396106813)
                }
            ];

        var infowindows = [];

        for (var i = 0; i < positions.length; i ++) {
            // 마커를 생성합니다
            var marker = new kakao.maps.Marker({
                map: map, // 마커를 표시할 지도
                position: positions[i].latlng // 마커의 위치
            });

            // 인포윈도우를 생성합니다
            var infowindow = new kakao.maps.InfoWindow({
                content: positions[i].content // 인포윈도우에 표시할 내용
            });

            // 인포윈도우를 infowindows 배열에 추가합니다.
            infowindows.push(infowindow);

            // 마커에 클릭 이벤트를 등록합니다
            kakao.maps.event.addListener(marker, 'click', makeClickListener(map, marker, infowindow));
        }

        // 인포윈도우를 닫는 클로저를 만드는 함수입니다
        function makeClickListener(map, marker, infowindow) {
            return function() {
                // 모든 인포윈도우를 닫습니다
                for (var i = 0; i < infowindows.length; i++) {
                    infowindows[i].close();
                }
                // 클릭한 마커에 해당하는 인포윈도우를 엽니다
                infowindow.open(map, marker);
            };
        }

        // 지도를 클릭하면 모든 인포윈도우를 닫습니다
        kakao.maps.event.addListener(map, 'click', function() {
            for (var i = 0; i < infowindows.length; i++) {
                infowindows[i].close();
            }
        });
        </script>
</body>
